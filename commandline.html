<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Start Jobs from the Terminal</title>
<link rel="stylesheet" type="text/css" href="C.css">
<script type="text/javascript" src="highlight.pack.js"></script><script>
document.addEventListener('DOMContentLoaded', function() {
  var matches = document.querySelectorAll('code.syntax')
  for (var i = 0; i < matches.length; i++) {
    hljs.highlightBlock(matches[i]);
  }
}, false);</script><script type="text/javascript" src="yelp.js"></script>
</head>
<body><main><div class="page">
<header><div class="inner pagewide"><div class="trails" role="navigation"><div class="trail">
<a class="trail" href="index.html" title="User Guide to HBS Grid Software Environments Technology Preview">User Guide to HBS Grid Software Environments Technology Preview</a> » </div></div></div></header><article><div class="hgroup pagewide"><h1 class="title"><span class="title">Start Jobs from the Terminal</span></h1></div>
<div class="region">
<div class="contents pagewide">
<div role="navigation" class="links sectionlinks"><div class="inner"><div class="region"><ul>
<li class="links "><a href="commandline.html#overview" title="Jobs submission basics">Jobs submission basics</a></li>
<li class="links "><a href="commandline.html#resources" title="Resource requirements">Resource requirements</a></li>
<li class="links "><a href="commandline.html#queues" title="Interactive and batch queue limits">Interactive and batch queue limits</a></li>
<li class="links "><a href="commandline.html#sessions" title="Software environments">Software environments</a></li>
</ul></div></div></div>
<p class="p">The HBS Grid uses <span class="link"><a href="https://www.ibm.com/docs/en/spectrum-lsf" title="https://www.ibm.com/docs/en/spectrum-lsf">IBM Spectrum LSF</a></span> to run applications on powerful
  remote computers. <span class="app">LSF</span> is a large and complex set of tools; our goal here is to give you just enough information so that you
  can use it to run jobs on our system, without overwhelming you with details and options.</p>
<div class="note note-tip" title="Tip">
<svg height="24" width="24" version="1.1">
 <g>
  <path class="yelp-svg-fill" style="color-rendering:auto;text-decoration-color:#000000;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;block-progression:tb;text-decoration-line:none;text-decoration-style:solid;image-rendering:auto;white-space:normal;text-indent:0;text-transform:none" d="m12 2c-3.8541 0-7 3.1459-7 7 0 1.823 0.4945 3.139 1.1641 4.133 0.6695 0.994 1.4328 1.671 2.039 2.471 0.0882 0.116 0.1749 0.656 0.2071 1.32 0.016 0.332 0.0133 0.68 0.1894 1.119 0.0881 0.22 0.2439 0.478 0.5059 0.672 0.2619 0.194 0.6028 0.285 0.8945 0.285h4c0.583 0 1.204-0.478 1.402-0.908 0.199-0.43 0.217-0.793 0.244-1.137 0.056-0.688 0.138-1.319 0.211-1.441 0.549-0.916 1.304-2.009 1.94-3.114 0.636-1.104 1.203-2.199 1.203-3.4 0-3.8541-3.146-7-7-7zm0 2c2.773 0 5 2.2267 5 5 0 0.456-0.359 1.401-0.936 2.402-0.111 0.195-0.246 0.399-0.369 0.598h-7.8825c-0.4871-0.728-0.8125-1.519-0.8125-3 0-2.7733 2.2267-5 5-5z"></path>
  <path class="yelp-svg-fill" d="m9 20a0.5 0.5 0 0 0 -0.5 0.5 0.5 0.5 0 0 0 0.5 0.5h6a0.5 0.5 0 0 0 0.5 -0.5 0.5 0.5 0 0 0 -0.5 -0.5h-6zm0 2a0.5 0.5 0 0 0 -0.5 0.5 0.5 0.5 0 0 0 0.5 0.5h6a0.5 0.5 0 0 0 0.5 -0.5 0.5 0.5 0 0 0 -0.5 -0.5h-6z"></path>
 </g>
</svg><div class="inner"><div class="region"><div class="contents"><p class="p"> Note: this software environment includes <span class="link"><a href="menulaunch.html" title="Launch Applications from the Desktop">robust graphical tools</a></span> that reduce the need to use the
    command line for many interactive tasks. This section is for those who prefer the command line, either for aesthetic reasons or because
    they need to submit <span class="em">batch</span> jobs or carry out complex operations that cannot easily be performed using graphical menu-driven tools.</p></div></div></div>
</div>
</div>
<section id="overview"><div class="inner">
<div class="hgroup pagewide"><h2 class="title"><span class="title">Jobs submission basics</span></h2></div>
<div class="region"><div class="contents pagewide">
<p class="p">LSF provides <span class="cmd">bsub</span>, a command-line program for running applications on powerful remote computers. For example, you can use</p>
<div class="code"><pre class="contents"><code>bsub -q short_int -Is R</code></pre></div>
<p class="p">to start an interactive R job on a compute node. Breaking this example down will make
    the basics of <span class="cmd">bsub</span> clear:</p>
<div class="list"><div class="inner"><div class="region"><ul class="list compact">
<li class="list"><p class="p"><span class="cmd">bsub</span> (<span class="em-bold em">b</span>atch <span class="em-bold em">sub</span>mission) is the top-level command used to run applications on powerful remote machines.</p></li>
<li class="list"><p class="p"><span class="cmd"> -q short_int</span> means you want to run on the <span class="em"> short interactive</span> queue (details below).</p></li>
<li class="list"><p class="p"><span class="cmd">-Is</span> means we are running an <span class="em-bold em">I</span>nteractive <span class="em-bold em">s</span>hell.</p></li>
<li class="list"><p class="p">The rest of the command (<span class="cmd">R</span> in this case) is the command that will be run on the remote machine.</p></li>
</ul></div></div></div>
<div class="note note-tip" title="Tip">
<svg height="24" width="24" version="1.1">
 <g>
  <path class="yelp-svg-fill" style="color-rendering:auto;text-decoration-color:#000000;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;block-progression:tb;text-decoration-line:none;text-decoration-style:solid;image-rendering:auto;white-space:normal;text-indent:0;text-transform:none" d="m12 2c-3.8541 0-7 3.1459-7 7 0 1.823 0.4945 3.139 1.1641 4.133 0.6695 0.994 1.4328 1.671 2.039 2.471 0.0882 0.116 0.1749 0.656 0.2071 1.32 0.016 0.332 0.0133 0.68 0.1894 1.119 0.0881 0.22 0.2439 0.478 0.5059 0.672 0.2619 0.194 0.6028 0.285 0.8945 0.285h4c0.583 0 1.204-0.478 1.402-0.908 0.199-0.43 0.217-0.793 0.244-1.137 0.056-0.688 0.138-1.319 0.211-1.441 0.549-0.916 1.304-2.009 1.94-3.114 0.636-1.104 1.203-2.199 1.203-3.4 0-3.8541-3.146-7-7-7zm0 2c2.773 0 5 2.2267 5 5 0 0.456-0.359 1.401-0.936 2.402-0.111 0.195-0.246 0.399-0.369 0.598h-7.8825c-0.4871-0.728-0.8125-1.519-0.8125-3 0-2.7733 2.2267-5 5-5z"></path>
  <path class="yelp-svg-fill" d="m9 20a0.5 0.5 0 0 0 -0.5 0.5 0.5 0.5 0 0 0 0.5 0.5h6a0.5 0.5 0 0 0 0.5 -0.5 0.5 0.5 0 0 0 -0.5 -0.5h-6zm0 2a0.5 0.5 0 0 0 -0.5 0.5 0.5 0.5 0 0 0 0.5 0.5h6a0.5 0.5 0 0 0 0.5 -0.5 0.5 0.5 0 0 0 -0.5 -0.5h-6z"></path>
 </g>
</svg><div class="inner"><div class="region"><div class="contents">
<p class="p">When you first log in to the HBS Grid using <span class="app">NoMachine</span> or <span class="app">ssh</span> you are running on a <span class="app">login node</span>.
      The login nodes <span class="em">do not</span> have substantial CPU or RAM available; all computationally intensive processes should be run on
      the <span class="app">compute nodes</span>. A diagram of the HBS Grid architecture helps make this clear:</p>
<div class="media media-image"><div class="inner"><img src="images/griddiagram.png" class="media media-block" alt=""></div></div>
<p class="p">As this diagram shows, the primary purpose of the <span class="app">login nodes</span> is to serve as a hub for launching jobs on powerful
      <span class="app">compute nodes</span>. You can do that from the command line using <span class="app">bsub</span> or from the desktop menu using
      application launchers.</p>
<p class="p">You may sometimes wish to run applications on the <span class="app">login node</span>, and this is perfectly fine as long as you are not using
      it for computationally intensive work. For example, you may wish to run <span class="cmd">python</span> to work out a small code example, or use
      <span class="cmd">locate</span> to find a file you were working on. These low-resource activities can and should be done on the <span class="app">login node</span>.
      The important thing to remember is that <span class="cmd">bsub</span> is used to run commands on powerful compute nodes.</p>
</div></div></div>
</div>
</div></div>
</div></section><section id="resources"><div class="inner">
<div class="hgroup pagewide"><h2 class="title"><span class="title">Resource requirements</span></h2></div>
<div class="region"><div class="contents pagewide">
<p class="p">The <span class="cmd">bsub</span> command allows you to specify <span class="em">RAM</span> and <span class="em">CPU</span> requirements for your job via the <span class="cmd">-M</span> and <span class="cmd">-n</span> arguments.
    For example, you can run a python job with 50 GB of RAM and 4 CPUs with</p>
<div class="code"><pre class="contents"><code>bsub -q short_int -M 50G -n 4 -Is python</code></pre></div>
<p class="p">Knowing just these three arguments to <span class="cmd">bsub</span> will take you a long way. There is
    <span class="link"><a href="https://www.ibm.com/support/knowledgecenter/SSWRJV_10.1.0/lsf_command_ref/bsub.heading_options.1.html" title="https://www.ibm.com/support/knowledgecenter/SSWRJV_10.1.0/lsf_command_ref/bsub.heading_options.1.html"> much more to know about bsub</a></span>,
    but these basics will get you started.</p>
</div></div>
</div></section><section id="queues"><div class="inner">
<div class="hgroup pagewide"><h2 class="title"><span class="title">Interactive and batch queue limits</span></h2></div>
<div class="region"><div class="contents pagewide">
<p class="p">Machines on the HBS Grid are grouped in <span class="em">queues</span> and <span class="cmd">bsub</span> can start jobs in either <span class="em">batch</span> (background) or
    <span class="em">interactive</span> modes. Batch jobs make it easier to run many jobs at once and are more efficient because jobs don't keep running after
    the program is executed. Interactive jobs on the other hand tend to be more convenient, especially for exploratory work or when developing
    or debugging a script or program.</p>
<p class="p"><span class="em-bold em">Batch</span> queues like <span class="em">short</span> and <span class="em">long</span> are for running commands without interaction. For example</p>
<div class="code"><pre class="contents"><code>bsub -q short Rscript my_r_code.R</code></pre></div>
<p class="p">runs <span class="file">my_r_code.R</span> in batch mode, and</p>
<div class="code"><pre class="contents"><code>bsub -q short stata -b my_stata_code.do</code></pre></div>
<p class="p">runs <span class="file">my_stata_code.do</span> in batch mode.</p>
<p class="p"><span class="em-bold em">Interactive</span> queues like <span class="em">short_int</span> and <span class="em">long_int</span>  are used to run
    applications that you will interact with. For example,</p>
<div class="code"><pre class="contents"><code>bsub -q short_int -Is rstudio</code></pre></div>
<p class="p">runs an interactive <span class="app">RStudio</span> application, and</p>
<div class="code"><pre class="contents"><code>bsub -q short_int -Is xstata</code></pre></div>
<p class="p">runs an interactive <span class="app">stata</span> application.</p>
<div class="note note-tip" title="Tip">
<svg height="24" width="24" version="1.1">
 <g>
  <path class="yelp-svg-fill" style="color-rendering:auto;text-decoration-color:#000000;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;block-progression:tb;text-decoration-line:none;text-decoration-style:solid;image-rendering:auto;white-space:normal;text-indent:0;text-transform:none" d="m12 2c-3.8541 0-7 3.1459-7 7 0 1.823 0.4945 3.139 1.1641 4.133 0.6695 0.994 1.4328 1.671 2.039 2.471 0.0882 0.116 0.1749 0.656 0.2071 1.32 0.016 0.332 0.0133 0.68 0.1894 1.119 0.0881 0.22 0.2439 0.478 0.5059 0.672 0.2619 0.194 0.6028 0.285 0.8945 0.285h4c0.583 0 1.204-0.478 1.402-0.908 0.199-0.43 0.217-0.793 0.244-1.137 0.056-0.688 0.138-1.319 0.211-1.441 0.549-0.916 1.304-2.009 1.94-3.114 0.636-1.104 1.203-2.199 1.203-3.4 0-3.8541-3.146-7-7-7zm0 2c2.773 0 5 2.2267 5 5 0 0.456-0.359 1.401-0.936 2.402-0.111 0.195-0.246 0.399-0.369 0.598h-7.8825c-0.4871-0.728-0.8125-1.519-0.8125-3 0-2.7733 2.2267-5 5-5z"></path>
  <path class="yelp-svg-fill" d="m9 20a0.5 0.5 0 0 0 -0.5 0.5 0.5 0.5 0 0 0 0.5 0.5h6a0.5 0.5 0 0 0 0.5 -0.5 0.5 0.5 0 0 0 -0.5 -0.5h-6zm0 2a0.5 0.5 0 0 0 -0.5 0.5 0.5 0.5 0 0 0 0.5 0.5h6a0.5 0.5 0 0 0 0.5 -0.5 0.5 0.5 0 0 0 -0.5 -0.5h-6z"></path>
 </g>
</svg><div class="inner"><div class="region"><div class="contents"><p class="p">The key differences when submitting batch vs interactive jobs are the <span class="cmd">-q</span> and <span class="cmd">-Is</span> arguments. For example we used
      <span class="cmd">-q short</span>for batch and <span class="cmd">-q short_int</span> for interactive. Interactive jobs must also include the <span class="cmd">-Is</span> option.</p></div></div></div>
</div>
<p class="p">Queues have other characteristics in addition to the batch vs. interactive distinction. These include the maximum run time and maximum number of CPUs
    that can be reserved per job. These queue-level limits are summarized in the table below.</p>
<div class="table"><div class="inner"><div class="region"><table class="table" style="border-style: solid;">
<tr>
<th><p class="p">Queue          </p></th>
<th><p class="p">Type                </p></th>
<th><p class="p">Length  </p></th>
<th><p class="p">Max Cores/Job</p></th>
</tr>
<tr class="shade">
<td><p class="p">long_int       </p></td>
<td><p class="p">interactive         </p></td>
<td><p class="p">3 days  </p></td>
<td><p class="p">4            </p></td>
</tr>
<tr>
<td><p class="p">short_int      </p></td>
<td><p class="p">interactive         </p></td>
<td><p class="p">1 day   </p></td>
<td><p class="p">12           </p></td>
</tr>
<tr class="shade">
<td><p class="p">sas_int        </p></td>
<td><p class="p">interactive         </p></td>
<td><p class="p">no limit</p></td>
<td><p class="p">4            </p></td>
</tr>
<tr>
<td><p class="p">long           </p></td>
<td><p class="p">batch               </p></td>
<td><p class="p">7 days  </p></td>
<td><p class="p">12           </p></td>
</tr>
<tr class="shade">
<td><p class="p">short          </p></td>
<td><p class="p">batch               </p></td>
<td><p class="p">3 days  </p></td>
<td><p class="p">16           </p></td>
</tr>
<tr>
<td><p class="p">gpu            </p></td>
<td><p class="p">interactive or batch</p></td>
<td><p class="p">no limit</p></td>
<td><p class="p">4            </p></td>
</tr>
<tr class="shade">
<td><p class="p">sas            </p></td>
<td><p class="p">batch               </p></td>
<td><p class="p">no limit</p></td>
<td><p class="p">4            </p></td>
</tr>
<tr>
<td><p class="p">unlimited      </p></td>
<td><p class="p">interactive or batch</p></td>
<td><p class="p">no limit</p></td>
<td><p class="p">4 (for now)  </p></td>
</tr>
</table></div></div></div>
</div></div>
</div></section><section id="sessions"><div class="inner">
<div class="hgroup pagewide"><h2 class="title"><span class="title">Software environments</span></h2></div>
<div class="region"><div class="contents pagewide">
<p class="p">The available software environments contain a huge selection of graphical and terminal-based tools and are described in <span class="link"><a href="environments.html" title="Software Applications and Environments">Software Applications and Environments</a></span>.
    For the most part you shouldn't need to do anything to install or configure these tools -- if there is some software you would like that we don't
    have please get in touch and we'll see if we can install and set it up for you.</p>
<p class="p">In order to facilitate reproducible research and analysis we preserve old software environments so that you can switch back to them later if needed.
    These older environments can be loaded using <span class="link"><a href="https://lmod.readthedocs.io/en/latest/010_user.html" title="https://lmod.readthedocs.io/en/latest/010_user.html">Lmod</a></span>. Running <span class="cmd">ml avail</span> will
    show you the available environments, named by date and version number.</p>
<p class="p">For example, suppose that you have a python project and that your <span class="app">pandas</span> code no longer works with the latest <span class="app">pandas</span> release in the current software
    environment. In that case you can revert to a previous software environment and run your analysis using an older version of <span class="app">pandas</span>.</p>
<p class="p">You can use the <span class="cmd">ml</span> command from the terminal to list, load, and unload Lmod environment, as shown below.</p>
<div class="screen"><pre class="contents"><code>      <span class="input">ml avail</span>
      <span class="output">
        -------------- /usr/local/app/rcs_bin/techpreview-dev/modulefiles --------------
        rcs/rcs_2020.01 (E)    rcs/rcs_2021.01 (E)    rcs/rcs_2021.03 (E,L,D)


        Where:
        D:  Default Module
        E:  Technology Preview
        L:  Module is loaded
        
        Use "module spider" to find all possible modules.
        Use "module keyword key1 key2 ..." to search for all possible modules matching
        any of the "keys".
      </span>
    </code></pre></div>
<p class="p">You can get information about specific software modules using the standard <span class="cmd">ml</span> or <span class="cmd">module</span> commands.</p>
<div class="screen"><pre class="contents"><code>      <span class="input">module spyder rcs/rcs_2021.03</span>
      <span class="output">
        ---------------------------------------------------------------------------
        rcs: rcs/rcs_2021.03
        ---------------------------------------------------------------------------
        Description:
        Conda environment for research computing
        
        Help:
        Sets up environment for Data Science and Statistical computing.
        
        A huge list of software is avalable, including 'python', 'spyder', 'R', 
        'rstudio', 'emacs', 'vscode', rclone, ripgrep, nnn and much more.
        
        Key software versions:
        
        libgcc-ng 9
        cudatoolkit 10.1
        tensorflow-gpu 2.2
        python 3.8
        jupyterlab 3.0
        numpy 1.20
        pandas 1.2
        r-base 4.0
        r-tidyverse 1.3
        sas 9.4
        stata 16
        octave 6.2
        mathematica 12
        matlab R2020a
        emacs 27.1
        QGIS 3.16
        
        For a detailed software list open a terminal and run 
        
        conda env export -n rcs_2021.03
      </span>
    </code></pre></div>
</div></div>
</div></section><section class="links" role="navigation"><div class="inner">
<div class="hgroup pagewide"></div>
<div class="contents pagewide"><div class="links guidelinks"><div class="inner">
<div class="title"><h2><span class="title">More Information</span></h2></div>
<div class="region"><ul><li class="links "><a href="index.html" title="User Guide to HBS Grid Software Environments Technology Preview">User Guide to HBS Grid Software Environments Technology Preview</a></li></ul></div>
</div></div></div>
</div></section>
</div>
<div class="clear"></div></article><footer><div class="inner pagewide"><div class="about ui-expander" role="contentinfo">
<div class="yelp-data yelp-data-ui-expander" data-yelp-expanded="false"></div>
<div class="inner">
<div class="hgroup"><h2><span class="title">About</span></h2></div>
<div class="region"><div class="contents"><div class="credits">
<div class="credits-authors">
<div class="title"><span class="title">Written By</span></div>
<ul class="credits"><li>Ista Zahn, ©President &amp; Fellows of Harvard College</li></ul>
</div>
<div class="credits-blank"></div>
<div class="credits-blank"></div>
</div></div></div>
</div>
</div></div></footer>
</div></main></body>
</html>
